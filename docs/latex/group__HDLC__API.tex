\hypertarget{group__HDLC__API}{}\section{Tiny H\+D\+LC protocol A\+PI functions}
\label{group__HDLC__API}\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}


low level H\+D\+LC protocol function -\/ only framing  


\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct__hdlc__handle__t}{\+\_\+hdlc\+\_\+handle\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{struct__hdlc__handle__t}{\+\_\+hdlc\+\_\+handle\+\_\+t} \hyperlink{group__HDLC__API_ga4537a8665b2abe023cb7fe40ea1bd024}{hdlc\+\_\+struct\+\_\+t}
\item 
\mbox{\Hypertarget{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}\label{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}} 
typedef struct \hyperlink{struct__hdlc__handle__t}{\+\_\+hdlc\+\_\+handle\+\_\+t} $\ast$ \hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t}
\begin{DoxyCompactList}\small\item\em hdlc handle \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group__HDLC__API_gabb73b32d08d8e79eefe9385634a74bf7}{hdlc\+\_\+crc\+\_\+t} \{ \newline
\hyperlink{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a5f34a095f94c39357e31badd2feb9426}{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+D\+E\+F\+A\+U\+LT} = 0, 
\hyperlink{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a01bc9e3bb4df100ae74bd65e33223a10}{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+8} = 8, 
\hyperlink{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a7ee7be32ac5752572334f3c6bc6fa5a1}{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+16} = 16, 
\hyperlink{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a77c7dfdc97801651d98b6c4eb79882d3}{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+32} = 32, 
\newline
\hyperlink{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a6ed874f871614e9de6358d678256a140}{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+O\+FF} = 0x\+FF
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t} \hyperlink{group__HDLC__API_gaa41c388433273a76460ddfbaff0f8f5d}{hdlc\+\_\+init} (\hyperlink{group__HDLC__API_ga4537a8665b2abe023cb7fe40ea1bd024}{hdlc\+\_\+struct\+\_\+t} $\ast$hdlc\+\_\+info)
\item 
int \hyperlink{group__HDLC__API_ga21d727583f0f4534c8e4688eafcec66f}{hdlc\+\_\+close} (\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t} handle)
\item 
void \hyperlink{group__HDLC__API_ga532836280097de1c8881df8336f21075}{hdlc\+\_\+reset} (\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t} handle)
\item 
int \hyperlink{group__HDLC__API_ga911a3f1cb32dd6cadd00223e0097642c}{hdlc\+\_\+run\+\_\+rx} (\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t} handle, const void $\ast$data, int len, int $\ast$error)
\item 
int \hyperlink{group__HDLC__API_gaf20d86bb10361096f507838394c624c7}{hdlc\+\_\+run\+\_\+rx\+\_\+until\+\_\+read} (\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t} handle, \hyperlink{tiny__types_8h_a15bec127d9ee63658563d62e92b5261b}{read\+\_\+block\+\_\+cb\+\_\+t} readcb, void $\ast$user\+\_\+data, uint16\+\_\+t timeout)
\item 
void \hyperlink{group__HDLC__API_ga73156f5cc3e59c3abb880d124de78f91}{hdlc\+\_\+set\+\_\+rx\+\_\+buffer} (\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t} handle, void $\ast$data, int size)
\item 
int \hyperlink{group__HDLC__API_gae31d921043b4f175603114c206b6b829}{hdlc\+\_\+run\+\_\+tx} (\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t} handle)
\item 
int \hyperlink{group__HDLC__API_ga8b5cc456927145cebd82b2b560a6fa10}{hdlc\+\_\+send} (\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t} handle, const void $\ast$data, int len, uint32\+\_\+t timeout)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
low level H\+D\+LC protocol function -\/ only framing 

this group implements low level H\+D\+LC functions, which implement framing only according to R\+FC 1662\+: 0x7E, 0x7D, 0x20 (I\+SO Standard 3309-\/1979). 

\subsection{Typedef Documentation}
\mbox{\Hypertarget{group__HDLC__API_ga4537a8665b2abe023cb7fe40ea1bd024}\label{group__HDLC__API_ga4537a8665b2abe023cb7fe40ea1bd024}} 
\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!hdlc\+\_\+struct\+\_\+t@{hdlc\+\_\+struct\+\_\+t}}
\index{hdlc\+\_\+struct\+\_\+t@{hdlc\+\_\+struct\+\_\+t}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}
\subsubsection{\texorpdfstring{hdlc\+\_\+struct\+\_\+t}{hdlc\_struct\_t}}
{\footnotesize\ttfamily typedef struct \hyperlink{struct__hdlc__handle__t}{\+\_\+hdlc\+\_\+handle\+\_\+t}  \hyperlink{group__HDLC__API_ga4537a8665b2abe023cb7fe40ea1bd024}{hdlc\+\_\+struct\+\_\+t}}

Structure describes configuration of lowest H\+D\+LC level Initialize this structure by 0 before passing to \hyperlink{group__HDLC__API_gaa41c388433273a76460ddfbaff0f8f5d}{hdlc\+\_\+init()} function. 

\subsection{Enumeration Type Documentation}
\mbox{\Hypertarget{group__HDLC__API_gabb73b32d08d8e79eefe9385634a74bf7}\label{group__HDLC__API_gabb73b32d08d8e79eefe9385634a74bf7}} 
\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!hdlc\+\_\+crc\+\_\+t@{hdlc\+\_\+crc\+\_\+t}}
\index{hdlc\+\_\+crc\+\_\+t@{hdlc\+\_\+crc\+\_\+t}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}
\subsubsection{\texorpdfstring{hdlc\+\_\+crc\+\_\+t}{hdlc\_crc\_t}}
{\footnotesize\ttfamily enum \hyperlink{group__HDLC__API_gabb73b32d08d8e79eefe9385634a74bf7}{hdlc\+\_\+crc\+\_\+t}}

H\+D\+LC C\+RC options, available \begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+D\+E\+F\+A\+U\+LT@{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+D\+E\+F\+A\+U\+LT}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+D\+E\+F\+A\+U\+LT@{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+D\+E\+F\+A\+U\+LT}}}\mbox{\Hypertarget{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a5f34a095f94c39357e31badd2feb9426}\label{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a5f34a095f94c39357e31badd2feb9426}} 
H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+D\+E\+F\+A\+U\+LT&If default is specified H\+D\+LC will auto select C\+RC option. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+8@{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+8}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+8@{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+8}}}\mbox{\Hypertarget{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a01bc9e3bb4df100ae74bd65e33223a10}\label{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a01bc9e3bb4df100ae74bd65e33223a10}} 
H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+8&Simple sum of all bytes in user payload. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+16@{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+16}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+16@{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+16}}}\mbox{\Hypertarget{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a7ee7be32ac5752572334f3c6bc6fa5a1}\label{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a7ee7be32ac5752572334f3c6bc6fa5a1}} 
H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+16&C\+C\+I\+T\+T-\/16. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+32@{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+32}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+32@{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+32}}}\mbox{\Hypertarget{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a77c7dfdc97801651d98b6c4eb79882d3}\label{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a77c7dfdc97801651d98b6c4eb79882d3}} 
H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+32&C\+C\+I\+T\+T-\/32. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+O\+FF@{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+O\+FF}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+O\+FF@{H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+O\+FF}}}\mbox{\Hypertarget{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a6ed874f871614e9de6358d678256a140}\label{group__HDLC__API_ggabb73b32d08d8e79eefe9385634a74bf7a6ed874f871614e9de6358d678256a140}} 
H\+D\+L\+C\+\_\+\+C\+R\+C\+\_\+\+O\+FF&Disable C\+RC field. \\
\hline

\end{DoxyEnumFields}


\subsection{Function Documentation}
\mbox{\Hypertarget{group__HDLC__API_ga21d727583f0f4534c8e4688eafcec66f}\label{group__HDLC__API_ga21d727583f0f4534c8e4688eafcec66f}} 
\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!hdlc\+\_\+close@{hdlc\+\_\+close}}
\index{hdlc\+\_\+close@{hdlc\+\_\+close}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}
\subsubsection{\texorpdfstring{hdlc\+\_\+close()}{hdlc\_close()}}
{\footnotesize\ttfamily int hdlc\+\_\+close (\begin{DoxyParamCaption}\item[{\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t}}]{handle }\end{DoxyParamCaption})}

Shutdowns all hdlc activity


\begin{DoxyParams}{Parameters}
{\em handle} & handle to hdlc instance \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__HDLC__API_gaa41c388433273a76460ddfbaff0f8f5d}\label{group__HDLC__API_gaa41c388433273a76460ddfbaff0f8f5d}} 
\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!hdlc\+\_\+init@{hdlc\+\_\+init}}
\index{hdlc\+\_\+init@{hdlc\+\_\+init}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}
\subsubsection{\texorpdfstring{hdlc\+\_\+init()}{hdlc\_init()}}
{\footnotesize\ttfamily \hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t} hdlc\+\_\+init (\begin{DoxyParamCaption}\item[{\hyperlink{group__HDLC__API_ga4537a8665b2abe023cb7fe40ea1bd024}{hdlc\+\_\+struct\+\_\+t} $\ast$}]{hdlc\+\_\+info }\end{DoxyParamCaption})}

Initializes hdlc level and returns hdlc handle or N\+U\+LL in case of error.


\begin{DoxyParams}{Parameters}
{\em hdlc\+\_\+info} & pointer to hdlc\+\_\+struct\+\_\+t structure, which defines user-\/specific configuration \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
handle to hdlc instance or N\+U\+LL. 
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
hdlc\+\_\+info structure passed to the function must be allocated all the time. 
\end{DoxyWarning}
\mbox{\Hypertarget{group__HDLC__API_ga532836280097de1c8881df8336f21075}\label{group__HDLC__API_ga532836280097de1c8881df8336f21075}} 
\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!hdlc\+\_\+reset@{hdlc\+\_\+reset}}
\index{hdlc\+\_\+reset@{hdlc\+\_\+reset}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}
\subsubsection{\texorpdfstring{hdlc\+\_\+reset()}{hdlc\_reset()}}
{\footnotesize\ttfamily void hdlc\+\_\+reset (\begin{DoxyParamCaption}\item[{\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t}}]{handle }\end{DoxyParamCaption})}

Resets hdlc state. Use this function, if hw error happened on tx or rx line, and this requires hardware change, and cancelling current operation.


\begin{DoxyParams}{Parameters}
{\em handle} & handle to hdlc instance \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__HDLC__API_ga911a3f1cb32dd6cadd00223e0097642c}\label{group__HDLC__API_ga911a3f1cb32dd6cadd00223e0097642c}} 
\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!hdlc\+\_\+run\+\_\+rx@{hdlc\+\_\+run\+\_\+rx}}
\index{hdlc\+\_\+run\+\_\+rx@{hdlc\+\_\+run\+\_\+rx}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}
\subsubsection{\texorpdfstring{hdlc\+\_\+run\+\_\+rx()}{hdlc\_run\_rx()}}
{\footnotesize\ttfamily int hdlc\+\_\+run\+\_\+rx (\begin{DoxyParamCaption}\item[{\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t}}]{handle,  }\item[{const void $\ast$}]{data,  }\item[{int}]{len,  }\item[{int $\ast$}]{error }\end{DoxyParamCaption})}

Processes incoming data. Implementation of reading data from hw is user responsibility. If \hyperlink{group__HDLC__API_ga911a3f1cb32dd6cadd00223e0097642c}{hdlc\+\_\+run\+\_\+rx()} returns value less than size of data passed to the function, then \hyperlink{group__HDLC__API_ga911a3f1cb32dd6cadd00223e0097642c}{hdlc\+\_\+run\+\_\+rx()} must be called later second time with the pointer to and size of not processed bytes.

This function will return the following codes in error field\+:
\begin{DoxyItemize}
\item T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+D\+A\+T\+A\+\_\+\+T\+O\+O\+\_\+\+L\+A\+R\+GE if receiving data fails to fit incoming buffer
\item T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+F\+A\+I\+L\+ED if generic failure happened
\item T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+W\+R\+O\+N\+G\+\_\+\+C\+RC if crc field of incoming frame is incorrect
\item T\+I\+N\+Y\+\_\+\+S\+U\+C\+C\+E\+SS if operation completed successfully
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em handle} & handle to hdlc instance \\
\hline
{\em data} & pointer to incoming data to process \\
\hline
{\em len} & size of received data in bytes \\
\hline
{\em error} & pointer to store error code. If no error, 0 is returned. this argument can be N\+U\+LL. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
number of processed bytes from specified data buffer. 
\end{DoxyReturn}
\mbox{\Hypertarget{group__HDLC__API_gaf20d86bb10361096f507838394c624c7}\label{group__HDLC__API_gaf20d86bb10361096f507838394c624c7}} 
\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!hdlc\+\_\+run\+\_\+rx\+\_\+until\+\_\+read@{hdlc\+\_\+run\+\_\+rx\+\_\+until\+\_\+read}}
\index{hdlc\+\_\+run\+\_\+rx\+\_\+until\+\_\+read@{hdlc\+\_\+run\+\_\+rx\+\_\+until\+\_\+read}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}
\subsubsection{\texorpdfstring{hdlc\+\_\+run\+\_\+rx\+\_\+until\+\_\+read()}{hdlc\_run\_rx\_until\_read()}}
{\footnotesize\ttfamily int hdlc\+\_\+run\+\_\+rx\+\_\+until\+\_\+read (\begin{DoxyParamCaption}\item[{\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t}}]{handle,  }\item[{\hyperlink{tiny__types_8h_a15bec127d9ee63658563d62e92b5261b}{read\+\_\+block\+\_\+cb\+\_\+t}}]{readcb,  }\item[{void $\ast$}]{user\+\_\+data,  }\item[{uint16\+\_\+t}]{timeout }\end{DoxyParamCaption})}

Runs rx cycle until full frame received.


\begin{DoxyParams}{Parameters}
{\em handle} & handle to hdlc instance \\
\hline
{\em readcb} & callback to read bytes from channel function \\
\hline
{\em user\+\_\+data} & user data to pass to readcb callback function \\
\hline
{\em timeout} & timeout in milliseconds to wait for new frame. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item T\+I\+N\+Y\+\_\+\+S\+U\+C\+C\+E\+SS if operation completed successfully
\item T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+F\+A\+I\+L\+ED if generic failure happened
\item T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+T\+I\+M\+E\+O\+UT if operation cannot be completed in specified time. 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{group__HDLC__API_gae31d921043b4f175603114c206b6b829}\label{group__HDLC__API_gae31d921043b4f175603114c206b6b829}} 
\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!hdlc\+\_\+run\+\_\+tx@{hdlc\+\_\+run\+\_\+tx}}
\index{hdlc\+\_\+run\+\_\+tx@{hdlc\+\_\+run\+\_\+tx}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}
\subsubsection{\texorpdfstring{hdlc\+\_\+run\+\_\+tx()}{hdlc\_run\_tx()}}
{\footnotesize\ttfamily int hdlc\+\_\+run\+\_\+tx (\begin{DoxyParamCaption}\item[{\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t}}]{handle }\end{DoxyParamCaption})}

Runs transmission at hdlc level. If there is frame to send, or send is in progress, this function will call send\+\_\+tx() callback multiple times. If send\+\_\+tx() callback reports 0, that means that hw device is busy and in this case \hyperlink{group__HDLC__API_gae31d921043b4f175603114c206b6b829}{hdlc\+\_\+run\+\_\+tx()} will return immediately.

\begin{DoxyWarning}{Warning}
this function must be called from one thread only.
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em handle} & handle to hdlc instance \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
negative value in case of error 0 if hw is busy, or no data is waiting for sending positive number of bytes passed to hw channel. 
\end{DoxyReturn}
\mbox{\Hypertarget{group__HDLC__API_ga8b5cc456927145cebd82b2b560a6fa10}\label{group__HDLC__API_ga8b5cc456927145cebd82b2b560a6fa10}} 
\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!hdlc\+\_\+send@{hdlc\+\_\+send}}
\index{hdlc\+\_\+send@{hdlc\+\_\+send}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}
\subsubsection{\texorpdfstring{hdlc\+\_\+send()}{hdlc\_send()}}
{\footnotesize\ttfamily int hdlc\+\_\+send (\begin{DoxyParamCaption}\item[{\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t}}]{handle,  }\item[{const void $\ast$}]{data,  }\item[{int}]{len,  }\item[{uint32\+\_\+t}]{timeout }\end{DoxyParamCaption})}

Puts next frame for sending. This function is thread-\/safe. You may call it from parallel threads.

If multithread\+\_\+mode is specificed for hdlc protocol, then \hyperlink{group__HDLC__API_ga8b5cc456927145cebd82b2b560a6fa10}{hdlc\+\_\+send()} function will wait for specified timeout until some tx thread, implemented by application, completes sending of the frame. If timeout happens, but the frame is not sent still, hdlc level rejects sending of the frame. In this case the frame will be set partially, causing RX errors on other side. Please use reasonable timeout.

If multithread\+\_\+mode is disabled for hdlc protocol, then \hyperlink{group__HDLC__API_ga8b5cc456927145cebd82b2b560a6fa10}{hdlc\+\_\+send()} function will start frame sending immediately by itself if TX line is not busy. \hyperlink{group__HDLC__API_ga8b5cc456927145cebd82b2b560a6fa10}{hdlc\+\_\+send()} will block until frame is sent or timeout. If timeout happens, but the frame is not sent still, hdlc level rejects sending of the frame. In this case the frame will be set partially, causing RX errors on other side. Please use reasonable timeout.

If timeout is specified as 0, \hyperlink{group__HDLC__API_ga8b5cc456927145cebd82b2b560a6fa10}{hdlc\+\_\+send()} function will not wait or perform send operation, but only pass data pointer to hdlc state machine. In this case, some other thread needs to or in the same thread you need to send data using \hyperlink{group__HDLC__API_gae31d921043b4f175603114c206b6b829}{hdlc\+\_\+run\+\_\+tx()}.


\begin{DoxyParams}{Parameters}
{\em handle} & handle to hdlc instance \\
\hline
{\em data} & pointer to new data to send (can be N\+U\+LL is you need to retry sending) \\
\hline
{\em len} & size of data to send in bytes \\
\hline
{\em timeout} & time in milliseconds to wait for data to be sent \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+F\+A\+I\+L\+ED if generic error happens T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+B\+U\+SY if TX queue is busy with another frame. T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+T\+I\+M\+E\+O\+UT if send operation cannot be completed in specified time. T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+D\+A\+TA if len is zero. T\+I\+N\+Y\+\_\+\+S\+U\+C\+C\+E\+SS if data is successfully sent 
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
buffer with data must be available all the time until data are actually sent to tx hw channel. That is if you use zero timeout, you need to use callback to understand, when buffer is not longer needed at hdlc level. 
\end{DoxyWarning}
\begin{DoxyNote}{Note}
T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+B\+U\+SY and T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+D\+A\+TA refer to putting new frame to TX hdlc queue. 
\end{DoxyNote}
\mbox{\Hypertarget{group__HDLC__API_ga73156f5cc3e59c3abb880d124de78f91}\label{group__HDLC__API_ga73156f5cc3e59c3abb880d124de78f91}} 
\index{Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}!hdlc\+\_\+set\+\_\+rx\+\_\+buffer@{hdlc\+\_\+set\+\_\+rx\+\_\+buffer}}
\index{hdlc\+\_\+set\+\_\+rx\+\_\+buffer@{hdlc\+\_\+set\+\_\+rx\+\_\+buffer}!Tiny H\+D\+L\+C protocol A\+P\+I functions@{Tiny H\+D\+L\+C protocol A\+P\+I functions}}
\subsubsection{\texorpdfstring{hdlc\+\_\+set\+\_\+rx\+\_\+buffer()}{hdlc\_set\_rx\_buffer()}}
{\footnotesize\ttfamily void hdlc\+\_\+set\+\_\+rx\+\_\+buffer (\begin{DoxyParamCaption}\item[{\hyperlink{group__HDLC__API_gabeaf7578aed5279d3af891bd85a9f961}{hdlc\+\_\+handle\+\_\+t}}]{handle,  }\item[{void $\ast$}]{data,  }\item[{int}]{size }\end{DoxyParamCaption})}

Sets new RX buffer for hdlc protocol. This function is not thread-\/safe.


\begin{DoxyParams}{Parameters}
{\em handle} & handle to hdlc instance \\
\hline
{\em data} & pointer to rx buffer \\
\hline
{\em size} & size of rx buffer in bytes \\
\hline
\end{DoxyParams}
