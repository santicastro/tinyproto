\hypertarget{group__FULL__DUPLEX__API}{}\section{Tiny Full Duplex A\+PI functions}
\label{group__FULL__DUPLEX__API}\index{Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtiny__fd__init__t__}{tiny\+\_\+fd\+\_\+init\+\_\+t\+\_\+}
\item 
class \hyperlink{classTiny_1_1IProtoFd}{Tiny\+::\+I\+Proto\+Fd}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct tiny\+\_\+fd\+\_\+data\+\_\+t $\ast$ \hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t}
\item 
typedef struct \hyperlink{structtiny__fd__init__t__}{tiny\+\_\+fd\+\_\+init\+\_\+t\+\_\+} \hyperlink{group__FULL__DUPLEX__API_gad19ac27f4ba1d2b807e0a440b0c927d2}{tiny\+\_\+fd\+\_\+init\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{group__FULL__DUPLEX__API_ga27fa59dffd1575419753beb35282bad5}{tiny\+\_\+fd\+\_\+init} (\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t} $\ast$handle, \hyperlink{group__FULL__DUPLEX__API_gad19ac27f4ba1d2b807e0a440b0c927d2}{tiny\+\_\+fd\+\_\+init\+\_\+t} $\ast$init)
\begin{DoxyCompactList}\small\item\em Initialized communication for Tiny Full Duplex protocol. \end{DoxyCompactList}\item 
void \hyperlink{group__FULL__DUPLEX__API_ga11e470503e3359bc29a5bcb65a9771d5}{tiny\+\_\+fd\+\_\+close} (\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t} handle)
\begin{DoxyCompactList}\small\item\em stops Tiny Full Duplex state machine \end{DoxyCompactList}\item 
int \hyperlink{group__FULL__DUPLEX__API_ga601c9874a570331580856c1ea28f7914}{tiny\+\_\+fd\+\_\+run\+\_\+tx} (\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t} handle, uint16\+\_\+t timeout)
\begin{DoxyCompactList}\small\item\em runs tx processing for specified period of time. \end{DoxyCompactList}\item 
int \hyperlink{group__FULL__DUPLEX__API_gad31f944514aef01e27bc3ec67fdbe140}{tiny\+\_\+fd\+\_\+run\+\_\+rx} (\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t} handle, uint16\+\_\+t timeout)
\begin{DoxyCompactList}\small\item\em runs rx processing for specified period of time. \end{DoxyCompactList}\item 
int \hyperlink{group__FULL__DUPLEX__API_ga490157ee98ea6148f99a5bb1f26c5f60}{tiny\+\_\+fd\+\_\+send} (\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t} handle, const void $\ast$buf, int len)
\begin{DoxyCompactList}\small\item\em Sends userdata over full-\/duplex protocol. \end{DoxyCompactList}\item 
int \hyperlink{group__FULL__DUPLEX__API_ga19789bea5b5acd68804773f0d6b0e3f7}{tiny\+\_\+fd\+\_\+buffer\+\_\+size\+\_\+by\+\_\+mtu} (int mtu, int max\+\_\+tx\+\_\+frames)
\item 
void \hyperlink{group__FULL__DUPLEX__API_gab86352107f707322e0ca15febf586cba}{tiny\+\_\+fd\+\_\+set\+\_\+ka\+\_\+timeout} (\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t} handle, uint32\+\_\+t keep\+\_\+alive)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Typedef Documentation}
\mbox{\Hypertarget{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}\label{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}} 
\index{Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}!tiny\+\_\+fd\+\_\+handle\+\_\+t@{tiny\+\_\+fd\+\_\+handle\+\_\+t}}
\index{tiny\+\_\+fd\+\_\+handle\+\_\+t@{tiny\+\_\+fd\+\_\+handle\+\_\+t}!Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}}
\subsubsection{\texorpdfstring{tiny\+\_\+fd\+\_\+handle\+\_\+t}{tiny\_fd\_handle\_t}}
{\footnotesize\ttfamily typedef struct tiny\+\_\+fd\+\_\+data\+\_\+t$\ast$ \hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t}}

This handle points to service data, required for full-\/duplex functioning. \mbox{\Hypertarget{group__FULL__DUPLEX__API_gad19ac27f4ba1d2b807e0a440b0c927d2}\label{group__FULL__DUPLEX__API_gad19ac27f4ba1d2b807e0a440b0c927d2}} 
\index{Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}!tiny\+\_\+fd\+\_\+init\+\_\+t@{tiny\+\_\+fd\+\_\+init\+\_\+t}}
\index{tiny\+\_\+fd\+\_\+init\+\_\+t@{tiny\+\_\+fd\+\_\+init\+\_\+t}!Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}}
\subsubsection{\texorpdfstring{tiny\+\_\+fd\+\_\+init\+\_\+t}{tiny\_fd\_init\_t}}
{\footnotesize\ttfamily typedef struct \hyperlink{structtiny__fd__init__t__}{tiny\+\_\+fd\+\_\+init\+\_\+t\+\_\+}  \hyperlink{group__FULL__DUPLEX__API_gad19ac27f4ba1d2b807e0a440b0c927d2}{tiny\+\_\+fd\+\_\+init\+\_\+t}}

This structure is used for initialization of Tiny Full Duplex protocol. 

\subsection{Function Documentation}
\mbox{\Hypertarget{group__FULL__DUPLEX__API_ga19789bea5b5acd68804773f0d6b0e3f7}\label{group__FULL__DUPLEX__API_ga19789bea5b5acd68804773f0d6b0e3f7}} 
\index{Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}!tiny\+\_\+fd\+\_\+buffer\+\_\+size\+\_\+by\+\_\+mtu@{tiny\+\_\+fd\+\_\+buffer\+\_\+size\+\_\+by\+\_\+mtu}}
\index{tiny\+\_\+fd\+\_\+buffer\+\_\+size\+\_\+by\+\_\+mtu@{tiny\+\_\+fd\+\_\+buffer\+\_\+size\+\_\+by\+\_\+mtu}!Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}}
\subsubsection{\texorpdfstring{tiny\+\_\+fd\+\_\+buffer\+\_\+size\+\_\+by\+\_\+mtu()}{tiny\_fd\_buffer\_size\_by\_mtu()}}
{\footnotesize\ttfamily int tiny\+\_\+fd\+\_\+buffer\+\_\+size\+\_\+by\+\_\+mtu (\begin{DoxyParamCaption}\item[{int}]{mtu,  }\item[{int}]{max\+\_\+tx\+\_\+frames }\end{DoxyParamCaption})}

Returns minimum required buffer size for specified parameters. 
\begin{DoxyParams}{Parameters}
{\em mtu} & size of desired user payload in bytes. \\
\hline
{\em max\+\_\+tx\+\_\+frames} & maximum tx queue size of I-\/frames. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__FULL__DUPLEX__API_ga11e470503e3359bc29a5bcb65a9771d5}\label{group__FULL__DUPLEX__API_ga11e470503e3359bc29a5bcb65a9771d5}} 
\index{Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}!tiny\+\_\+fd\+\_\+close@{tiny\+\_\+fd\+\_\+close}}
\index{tiny\+\_\+fd\+\_\+close@{tiny\+\_\+fd\+\_\+close}!Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}}
\subsubsection{\texorpdfstring{tiny\+\_\+fd\+\_\+close()}{tiny\_fd\_close()}}
{\footnotesize\ttfamily void tiny\+\_\+fd\+\_\+close (\begin{DoxyParamCaption}\item[{\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t}}]{handle }\end{DoxyParamCaption})}



stops Tiny Full Duplex state machine 

stops Tiny Full Duplex state machine.


\begin{DoxyParams}{Parameters}
{\em handle} & handle of full-\/duplex protocol \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__FULL__DUPLEX__API_ga27fa59dffd1575419753beb35282bad5}\label{group__FULL__DUPLEX__API_ga27fa59dffd1575419753beb35282bad5}} 
\index{Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}!tiny\+\_\+fd\+\_\+init@{tiny\+\_\+fd\+\_\+init}}
\index{tiny\+\_\+fd\+\_\+init@{tiny\+\_\+fd\+\_\+init}!Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}}
\subsubsection{\texorpdfstring{tiny\+\_\+fd\+\_\+init()}{tiny\_fd\_init()}}
{\footnotesize\ttfamily int tiny\+\_\+fd\+\_\+init (\begin{DoxyParamCaption}\item[{\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t} $\ast$}]{handle,  }\item[{\hyperlink{group__FULL__DUPLEX__API_gad19ac27f4ba1d2b807e0a440b0c927d2}{tiny\+\_\+fd\+\_\+init\+\_\+t} $\ast$}]{init }\end{DoxyParamCaption})}



Initialized communication for Tiny Full Duplex protocol. 

The function initializes internal structures for Tiny Full Duplex state machine.


\begin{DoxyParams}{Parameters}
{\em handle} & -\/ pointer to Tiny Full Duplex data \\
\hline
{\em init} & -\/ pointer to tiny\+\_\+fd\+\_\+init\+\_\+t data. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+I\+N\+Y\+\_\+\+N\+O\+\_\+\+E\+R\+R\+OR in case of success. T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+F\+A\+I\+L\+ED if init parameters are incorrect. 
\end{DoxyReturn}
\begin{DoxyRemark}{Remarks}
This function is not thread safe. 
\end{DoxyRemark}
\mbox{\Hypertarget{group__FULL__DUPLEX__API_gad31f944514aef01e27bc3ec67fdbe140}\label{group__FULL__DUPLEX__API_gad31f944514aef01e27bc3ec67fdbe140}} 
\index{Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}!tiny\+\_\+fd\+\_\+run\+\_\+rx@{tiny\+\_\+fd\+\_\+run\+\_\+rx}}
\index{tiny\+\_\+fd\+\_\+run\+\_\+rx@{tiny\+\_\+fd\+\_\+run\+\_\+rx}!Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}}
\subsubsection{\texorpdfstring{tiny\+\_\+fd\+\_\+run\+\_\+rx()}{tiny\_fd\_run\_rx()}}
{\footnotesize\ttfamily int tiny\+\_\+fd\+\_\+run\+\_\+rx (\begin{DoxyParamCaption}\item[{\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t}}]{handle,  }\item[{uint16\+\_\+t}]{timeout }\end{DoxyParamCaption})}



runs rx processing for specified period of time. 

Runs rx processing for specified period of time. After timeout happens, the function returns. If you need it to run in non-\/blocking mode, please using timeout 0 ms.


\begin{DoxyParams}{Parameters}
{\em handle} & handle of full-\/duplex protocol \\
\hline
{\em timeout} & maximum timeout in milliseconds to perform rx operations \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__FULL__DUPLEX__API_ga601c9874a570331580856c1ea28f7914}\label{group__FULL__DUPLEX__API_ga601c9874a570331580856c1ea28f7914}} 
\index{Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}!tiny\+\_\+fd\+\_\+run\+\_\+tx@{tiny\+\_\+fd\+\_\+run\+\_\+tx}}
\index{tiny\+\_\+fd\+\_\+run\+\_\+tx@{tiny\+\_\+fd\+\_\+run\+\_\+tx}!Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}}
\subsubsection{\texorpdfstring{tiny\+\_\+fd\+\_\+run\+\_\+tx()}{tiny\_fd\_run\_tx()}}
{\footnotesize\ttfamily int tiny\+\_\+fd\+\_\+run\+\_\+tx (\begin{DoxyParamCaption}\item[{\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t}}]{handle,  }\item[{uint16\+\_\+t}]{timeout }\end{DoxyParamCaption})}



runs tx processing for specified period of time. 

Runs tx processing for specified period of time. After timeout happens, the function returns. If you need it to run in non-\/blocking mode, please use timeout 0 ms.

\begin{DoxyWarning}{Warning}
this function actually sends data to the communication channel. \hyperlink{group__FULL__DUPLEX__API_ga490157ee98ea6148f99a5bb1f26c5f60}{tiny\+\_\+fd\+\_\+send()} puts data to queue, but doesn\textquotesingle{}t really send them.
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em handle} & handle of full-\/duplex protocol \\
\hline
{\em timeout} & maximum timeout in milliseconds to perform tx operations \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__FULL__DUPLEX__API_ga490157ee98ea6148f99a5bb1f26c5f60}\label{group__FULL__DUPLEX__API_ga490157ee98ea6148f99a5bb1f26c5f60}} 
\index{Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}!tiny\+\_\+fd\+\_\+send@{tiny\+\_\+fd\+\_\+send}}
\index{tiny\+\_\+fd\+\_\+send@{tiny\+\_\+fd\+\_\+send}!Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}}
\subsubsection{\texorpdfstring{tiny\+\_\+fd\+\_\+send()}{tiny\_fd\_send()}}
{\footnotesize\ttfamily int tiny\+\_\+fd\+\_\+send (\begin{DoxyParamCaption}\item[{\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t}}]{handle,  }\item[{const void $\ast$}]{buf,  }\item[{int}]{len }\end{DoxyParamCaption})}



Sends userdata over full-\/duplex protocol. 

Sends userdata over full-\/duplex protocol. Note, that this command will return success, when data are copied to internal queue. That doesn\textquotesingle{}t mean that data physically sent, but they are enqueued for sending.

When timeout happens, the data were not actually enqueued. Call this function once again. If T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+D\+A\+T\+A\+\_\+\+T\+O\+O\+\_\+\+L\+A\+R\+GE is returned, try to send less data. If you don\textquotesingle{}t want to care about data size, please, use different function tiny\+\_\+fd\+\_\+write()..


\begin{DoxyParams}{Parameters}
{\em handle} & pointer to tiny\+\_\+fd\+\_\+handle\+\_\+t \\
\hline
{\em buf} & data to send \\
\hline
{\em len} & length of data to send\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Success result or error code\+:
\begin{DoxyItemize}
\item T\+I\+N\+Y\+\_\+\+S\+U\+C\+C\+E\+SS if user data are put to internal queue.
\item T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+T\+I\+M\+E\+O\+UT if no room in internal queue to put data. Retry operation once again.
\item T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+F\+A\+I\+L\+ED if request was cancelled, by \hyperlink{group__FULL__DUPLEX__API_ga11e470503e3359bc29a5bcb65a9771d5}{tiny\+\_\+fd\+\_\+close()} or other error happened.
\item T\+I\+N\+Y\+\_\+\+E\+R\+R\+\_\+\+D\+A\+T\+A\+\_\+\+T\+O\+O\+\_\+\+L\+A\+R\+GE if user data are too big to fit in tx buffer. 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{group__FULL__DUPLEX__API_gab86352107f707322e0ca15febf586cba}\label{group__FULL__DUPLEX__API_gab86352107f707322e0ca15febf586cba}} 
\index{Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}!tiny\+\_\+fd\+\_\+set\+\_\+ka\+\_\+timeout@{tiny\+\_\+fd\+\_\+set\+\_\+ka\+\_\+timeout}}
\index{tiny\+\_\+fd\+\_\+set\+\_\+ka\+\_\+timeout@{tiny\+\_\+fd\+\_\+set\+\_\+ka\+\_\+timeout}!Tiny Full Duplex A\+P\+I functions@{Tiny Full Duplex A\+P\+I functions}}
\subsubsection{\texorpdfstring{tiny\+\_\+fd\+\_\+set\+\_\+ka\+\_\+timeout()}{tiny\_fd\_set\_ka\_timeout()}}
{\footnotesize\ttfamily void tiny\+\_\+fd\+\_\+set\+\_\+ka\+\_\+timeout (\begin{DoxyParamCaption}\item[{\hyperlink{group__FULL__DUPLEX__API_ga91e6b79431fe38570fb102701ef0b7e8}{tiny\+\_\+fd\+\_\+handle\+\_\+t}}]{handle,  }\item[{uint32\+\_\+t}]{keep\+\_\+alive }\end{DoxyParamCaption})}

Sets keep alive timeout in milliseconds. This timeout is used to send special RR frames, when no user data queued for sending. 
\begin{DoxyParams}{Parameters}
{\em handle} & pointer to tiny\+\_\+fd\+\_\+handle\+\_\+t \\
\hline
{\em keep\+\_\+alive} & timeout in milliseconds \\
\hline
\end{DoxyParams}
